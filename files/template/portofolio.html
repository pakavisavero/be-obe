<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <style type="text/css">
      @page {
        size: 100mm 200mm landscape;
      }

      @media print {
        .new-page {
          page-break-before: always;
        }

        body {
          width: 21cm;
          height: 29.7cm;
        }
      }

      * {
        font-size: 11px !important;
      }

      .new-page {
        margin-bottom: 50px;
      }

      .container {
        padding: 15px;
      }

      .text-header {
        text-transform: uppercase;
      }

      .text-not-header {
        text-transform: none;
        font-weight: normal !important;
      }

      .title {
        font-size: 22px !important;
        margin-top: 20px;
        margin-bottom: 30px;
      }

      table thead tr th.color-first {
        background-color: #ffffcc !important;
      }

      table thead tr th.color-second {
        background-color: #ffc000 !important;
      }

      table tbody tr td.nilai {
        background-color: #92d050 !important;
        font-weight: bold;
        border: 0 !important;
      }

      table tbody tr td.three-rows {
        background-color: #17365d !important;
        border: 0 !important;
      }

      table#form-siap tbody tr td.list {
        width: 100px;
      }

      table#form-siap tbody tr td.semicolon {
        width: 40px;
      }

      table.list-mahasiswa {
        margin-top: 40px;
      }

      table.list-mahasiswa thead tr th.blueBg {
        background-color: #8db3e2 !important;
        border: 0 !important;
      }

      table.list-mahasiswa thead tr th.orangeBg {
        background-color: #ffc000 !important;
        border: 0 !important;
      }

      table.list-mahasiswa tbody tr td.blueLightBg {
        background-color: #c6d9f0 !important;
        text-align: center;
        border: 0 !important;
      }

      table.list-mahasiswa tbody tr td.greenBg,
      table.list-mahasiswa tbody tr td.lulusBg {
        background-color: #92d050 !important;
        text-align: center;
        color: white;
        border: 0 !important;
      }

      table.list-mahasiswa tbody tr td.remidiBg {
        background-color: #ffffcc !important;
        text-align: center;
        color: black;
        border: 0 !important;
      }

      table.list-mahasiswa tbody tr td.tidakLulusBg {
        background-color: #c9211e !important;
        text-align: center;
        color: white;
        border: 0 !important;
      }
    </style>
  </head>

  <body>
    <div class="container">
      {% for nilai in nilais %}
      <h2 class="title">{{ nilai.0 }}</h2>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th class="text-center text-header" scope="col" rowspan="3">No</th>
            <th class="text-left text-header" scope="col" rowspan="3">NIM</th>
            <th class="text-left text-header" scope="col" rowspan="3">
              Nama Mahasiswa
            </th>
            <th class="text-left text-header" scope="col" rowspan="3">
              {{ nilai[0] }}
            </th>
            <th class="text-center text-header" scope="col">{{ nilai.0 }}</th>
            {% for cpmk in bobot[nilai[2]] %}
            <th class="text-center text-header color-first" scope="col">
              {{ nilai[4] }} {{ cpmk['id'] }}
            </th>
            {% endfor %}
          </tr>
          <tr>
            <th class="text-center text-header" scope="col">CPMK</th>
            {% for cpmk in bobot[nilai[2]] %}
            <th class="text-center text-header color-first" scope="col">
              {{ cpmk['name'] }}
            </th>
            {% endfor %}
          </tr>
          <tr>
            <th class="text-center text-header" scope="col">Bobot Nilai</th>
            {% for cpmk in bobot[nilai[2]] %}
            <th class="text-center text-header color-second" scope="col">
              {{ cpmk['bobot'] }}
            </th>
            {% endfor %}
          </tr>
        </thead>

        <tbody>
          {% for dt in data %}
          <tr>
            <td class="text-center">{{ dt['no'] }}</td>
            <td>{{ dt['nim'] }}</td>
            <td class="text-header">{{ dt['full_name'] }}</td>
            <td class="text-center nilai">{{ dt[nilai.1] }}</td>
            <td class="three-rows"></td>
            {% for bobot in dt[nilai[3]] %}
            <td class="text-center">{{ bobot }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <p class="new-page"></p>
      {% endfor %}

      <table id="form-siap">
        <tbody>
          <tr>
            <td class="list">Mata Kuliah</td>
            <td class="semicolon">:</td>
            <td>
              {{ pk.mataKuliah.kode_mk }} - {{ pk.mataKuliah.mata_kuliah }}
            </td>
          </tr>
          <tr>
            <td class="list">Tahun Ajaran</td>
            <td class="semicolon">:</td>
            <td>{{ pk.tahunAjaran.tahun_ajaran }}</td>
          </tr>
          <tr>
            <td class="list">Semester</td>
            <td class="semicolon">:</td>
            <td>{{ pk.semester }}</td>
          </tr>
          <tr>
            <td class="list">Kelas</td>
            <td class="semicolon">:</td>
            <td>{{ pk.kelas }}</td>
          </tr>
          <tr>
            <td class="list">Program Studi</td>
            <td class="semicolon">:</td>
            <td>{{ pk.prodi.prodi }}</td>
          </tr>
        </tbody>
      </table>

      <table class="table table-bordered list-mahasiswa">
        <thead>
          <th class="text-left text-header blueBg" scope="col">NIM</th>
          <th class="text-left text-header blueBg" scope="col">
            Nama Mahasiswa
          </th>
          <th class="text-left text-header blueBg" scope="col">Semester</th>
          <th class="text-left text-header blueBg" scope="col">Status</th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai Tugas</span>
            <span>Studi Kasus </span>
            <span>(0-100)</span>
          </th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai Praktek</span>
            <span>(0-100)</span>
          </th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai UTS</span>
            <span>(0-100)</span>
          </th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai UAS</span>
            <span>(0-100)</span>
          </th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai Akhir</span>
            <span style="display: block !important">Angka</span>
            <span>(0-100)</span>
          </th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai Akhir</span>
            <span style="display: block !important">Huruf</span>
            <span>(A / B / C / D)</span>
          </th>
          <th class="text-left text-header blueBg" scope="col">
            <span style="display: block !important">Nilai</span>
            <span style="display: block !important">Bobot</span>
            <span>(0 - 4)</span>
          </th>
          <th class="text-left text-header orangeBg" scope="col">
            <span style="display: block !important">Outcome</span>
          </th>
        </thead>
        <tbody>
          {% for dt in data %}
          <tr>
            <td>{{ dt['nim'] }}</td>
            <td>{{ dt['full_name'] }}</td>
            <td>{{ dt['semester'] }}</td>
            <td>{{ dt['status'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_tugas'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_praktek'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_uts'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_uas'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_akhir'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_akhir_huruf'] }}</td>
            <td class="blueLightBg">{{ dt['nilai_bobot'] }}</td>
            {% if dt['color'] == '#92d050' %}
            <td class="lulusBg">{{ dt['keterangan'] }}</td>
            {% elif dt['color'] == '#ffffcc' %}
            <td class="remidiBg">{{ dt['keterangan'] }}</td>
            {% else %}
            <td class="tidakLulusBg">{{ dt['keterangan'] }}</td>
            {% endif %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </body>
</html>
